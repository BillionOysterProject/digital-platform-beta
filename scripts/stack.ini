[supervisord]
logfile=logs/supervisord.log
pidfile=scripts/supervisord.pid
childlogdir=logs
nodaemon = true

[program:database]
command                 = pivot -s schema -L debug -Q web
autorestart             = true
startretries            = 2147483647
stopasgroup             = true
directory               = database
stdout_logfile          = /dev/stderr
stdout_logfile_maxbytes = 0
redirect_stderr         = true
environment             = AWS_PROFILE=bop

[program:backend]
command                 = make debug
autorestart             = true
startretries            = 2147483647
directory               = backend
stopasgroup             = true
stdout_logfile          = /dev/stderr
stdout_logfile_maxbytes = 0
redirect_stderr         = true
environment             = AWS_PROFILE=bop,SENTRY_DSN="https://c8fb63f1567f4ea9ac1e4e5c660f0412:32cdbb2eb62343a28bbe82ab9bb4c5ce@sentry.io/1283609"

[program:worker]
command                 = %(ENV_PWD)s/backend/env/bin/python worker.py
autorestart             = true
startretries            = 2147483647
directory               = backend
stopasgroup             = true
stdout_logfile          = /dev/stderr
stdout_logfile_maxbytes = 0
redirect_stderr         = true
environment             = AWS_PROFILE=bop

[program:frontend]
command                 = diecast -a :28419 -L debug
autorestart             = true
stopasgroup             = true
startretries            = 2147483647
directory               = frontend
stdout_logfile          = /dev/stderr
stdout_logfile_maxbytes = 0
redirect_stderr         = true
