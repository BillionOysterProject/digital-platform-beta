<h1>Register a Structure</h1>

<form class="form mt-4">

<!-- ########################################################################################### -->
    <!-- Step 1: Enter Structure Metadata-->
    <!--         Enter information (like structure type and site) about the structure. -->
    <!-- ########################################################################################### -->
    <section class="content shaded expeditions-data-step" data-toggle="collapse" data-target="#enterBaselineData1">
        <section class="container-fluid">
            <div id="step1-header" class="blue">
                <span class="fa-stack fa-3x">
                    <i class="fa fa-circle-o fa-stack-2x"></i>
                    <strong class="fa-stack-1x">1</strong>
                </span>
                <span>
                    <strong>Enter information about this structure</strong>.
                    (Required) Click to enter data about your oyster research structure
                    like type and location.
                </span>
            </div>
        </section>
    </section>

    <section class="content collapse" id="enterBaselineData1">
        <div class="form-group col-sm-6">
            <label
                class="required"
                for="name"
            >
                Structure Name
            </label>
            <input
                type="text"
                class="form-control"
                name="name"
                id="name"
            />
            <small class="form-text mb-3">
                Give your structure a unique name that you'll remember easily.
            </small>
        </div>

        <div class="col-sm-12">
            <div class="form-group mt-4">
                <label>
                    Select a structure type
                </label>
                {{ range $i, $structureType := $.page.structureTypes }}
                <div class="custom-control custom-radio">
                    <input
                        type="radio"
                        id="structure{{ $i }}"
                        class="custom-control-input"
                    >
                    <label class="custom-control-label w-100" for="structure{{ $i }}">
                        {{ $structureType.label }}
                    </label>
                </div>
                {{ end }}
            </div>
        </div>

        <!--TODO: if user selects "oyster tank," create a new site using the org address-->
        <div class="form-group col-sm-8">
            <label for="site">Site Name</label>
            <div class="input-group">
                <input
                    type="text"
                    class="form-control typeahead w-100"
                    name="site"
                    data-typeahead-url="/api/sites?fields=name&amp;q=str:name/contains:{}&amp;sort=name"
                    data-typeahead-field="name"
                >
            </div>
            <small class="form-text mb-3">
                Start typing your site's name in the field above to pull up your site.
            </small>
        </div>

        <div class="col-sm-12">
            <div class="form-group mt-4">
                <label>
                    Status
                </label>
                {{ range $i, $structureStatus := $.page.structureStatuses }}
                <div class="custom-control custom-radio">
                    <input
                        type="radio"
                        id="structureStatus{{ $i }}"
                        class="custom-control-input"
                    >
                    <label class="custom-control-label w-100" for="structureStatus{{ $i }}">
                        {{ $structureStatus.label }}
                    </label>
                </div>
                {{ end }}
            </div>
        </div>

        <div class="form-group col-sm-6">
            <label
                class="required"
                for="tagNumber"
            >
                Tag Number
            </label>
            <input
                type="text"
                class="form-control"
                name="tagNumber"
                id="tagNumber"
            />
            <small class="form-text mb-3">
                For Oyster Research Stations, BOP should have given you a tag with a number to attach to your ORS.
                Contact bop.digital.platform@nyharbor.org if you did not receive a tag for your ORS.
            </small>
        </div>

        <div class="form-group col-sm-8">
            <div class="form-group">
                <label for="notes">Notes</label>
                <textarea
                    class="form-control"
                    id="notes"
                    rows="5"
                >
                </textarea>
            </div>
        </div>
    </section>

    <!-- ########################################################################################### -->
    <!-- Step 2: Enter baseline data-->
    <!--          -->
    <!-- ########################################################################################### -->
    <section class="content shaded expeditions-data-step" data-toggle="collapse" data-target="#enterBaselineData2">
        <section class="container-fluid">
            <div id="step1-header" class="blue">
                <span class="fa-stack fa-3x">
                    <i class="fa fa-circle-o fa-stack-2x"></i>
                    <strong class="fa-stack-1x">2</strong>
                </span>

                <span>
                    <strong>Enter baseline data for this structure</strong>.
                    (Required) Click to enter oyster measurement and site baselines.
                </span>
            </div>
        </section>
    </section>

    <section class="content collapse" id="enterBaselineData2">
        <div id="accordion">
            <div class="card border-0">
                <div class="card-header" id="addOysterBaselines">
                    <section class="shaded" data-toggle="collapse" data-target="#oysterBaselines">
                        <section class="container-fluid">
                            <div id="step1-header" class="blue">
                                <i class="fa fa-anchor fa-2x"></i>
                                <strong>Oyster Baselines</strong>:
                                Click to fill this section out when you first get a batch of oysters.
                                You won't need to fill this out again unless you get new oysters.
                            </div>
                        </section>
                    </section>
                </div>

                <div id="oysterBaselines" class="collapse" aria-labelledby="addOysterBaselines" data-parent="#accordion">
                    <div class="card-body">
                        <p>
                            Click on the tabs below to enter the set date, source, # of live oysters, and
                            total mass for each of the 10 substrate shells.
                        </p>

                        <ul class="nav nav-tabs">
                            {{ range $i, $shell := sequence 10 }}
                            <li class="nav-item{{ if eq $shell 0}} active{{ end }}">
                                <a class="nav-link" href="#">
                                    Shell {{ add $shell 1 }}
                                </a>
                            </li>
                            {{ end }}
                        </ul>
                        <br/>
                        <div class="form-check form-check-inline">
                            <input
                                class="form-check-input"
                                type="checkbox"
                                id="inlineCheckbox1"
                                value="option1">
                            <label
                                class="form-check-label"
                                for="inlineCheckbox1"
                            >
                                Apply Set Date and Source to all 10 substrate shells
                            </label>
                        </div>
                        <br/>
                        <br/>
                        <div class="form-group">
                            <label for="setDate">Set Date</label>
                            <input
                                class="form-control col-4"
                                type="datetime-local"
                                name="monitoringSetDate"
                                value="{{ now `ymd` }}"
                                autofocus
                            >
                        </div>

                        <div class="form-group mt-4">
                            <label>Source</label>

                            {{ range $i, $oysterSource := $.page.oysterSources }}
                            <div class="custom-control custom-radio">
                                <input
                                    type="radio"
                                    name="baselineOysterSource"
                                    id="oysterSource{{ $i }}"
                                    class="custom-control-input"
                                >
                                <label class="custom-control-label w-100" for="oysterSource{{ $i }}">
                                    {{ $oysterSource.label }}
                                </label>
                            </div>
                            {{ end }}
                        </div>
                        <div class="form-group col-sm-4">
                            <label
                                class="required"
                                for="numberOfOysters"
                            >
                                Total number of live oysters on shell at baseline
                            </label>
                            <input
                                type="text"
                                class="form-control"
                                name="numberOfOysters"
                                id="numberOfOysters"
                            />
                        </div>
                        <div class="form-group col-sm-4">
                            <label
                                class="required"
                                for="massOfOysters"
                            >
                                Total mass of substrate shell at baseline (grams)
                            </label>
                            <input
                                type="text"
                                class="form-control"
                                name="massOfOysters"
                                id="massOfOysters"
                            />
                        </div>
                    </div>
                </div>
            </div>

            <div class="card border-0">
                <div class="card-header" id="addSiteBaselines">
                    <section class="shaded" data-toggle="collapse" data-target="#siteBaselines">
                        <section class="container-fluid">
                            <div id="step1-header" class="blue">
                                <i class="fa fa-anchor fa-2x"></i>
                                <strong>Site Baselines</strong>:
                                Click to fill this section out when you first visit your site.
                                You won't need to fill it out again unless you move to a new site (or there are big
                                changes like construction at your site).
                            </div>
                        </section>
                    </section>
                </div>

                <div id="siteBaselines" class="collapse" aria-labelledby="addSiteBaselines" data-parent="#accordion">
                    <div class="card-body">
                        <div class="form-group mt-4">
                            <label
                                for="CSO"
                            >
                                Are there any marked Combined Sewer Overflow (CSO) pipes?
                            </label>

                            <div class="custom-control custom-radio">
                                <input
                                    type="radio"
                                    name="yesCSO"
                                    id="yesCSO"
                                    class="custom-control-input"
                                >
                                <label
                                    class="custom-control-label w-100"
                                    for="yesCSO"
                                >
                                    Yes
                                </label>
                            </div>

                            <div class="custom-control custom-radio">
                                <input
                                    type="radio"
                                    name="noCSO"
                                    class="custom-control-input"
                                    id="noCSO"
                                >
                                <label class="custom-control-label w-100" for="noCSO">
                                    No
                                </label>
                            </div>
                        </div>

                        <div class="form-group mt-4">
                            <label for="otherPipes">Are there any unmarked or other outfall pipes?</label>
                            <div class="custom-control custom-radio">
                                <input
                                    type="radio"
                                    name="yesPipes"
                                    id="yesPipes"
                                    class="custom-control-input"
                                >
                                <label class="custom-control-label w-100" for="ba1">
                                    Yes
                                </label>
                            </div>
                            <div class="custom-control custom-radio">
                                <input
                                    type="radio"
                                    name="noPipes"
                                    class="custom-control-input"
                                    id="noPipes"
                                >
                                <label class="custom-control-label w-100" for="ba2">
                                    No
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label
                                class="required"
                                for="pipeDiameter"
                            >
                                What's the approximate diameter of the pipe (cm)?
                            </label>
                            <input
                                type="text"
                                class="form-control col-sm-8"
                                name="pipeDiameter"
                                id="pipeDiameter"
                            />
                        </div>

                        <p>
                            What kinds of surfaces are on the adjacent shoreline (about 100 x 100 feet)? Estimate the percentage of each type of surface cover.

                            <ul>
                                <li>Impervious Surface (concrete/asphalt paths, roads, buildings, etc.)</li>

                                <li>Pervious Surface (dirt, gravel, wood chips, etc.)</li>

                                <li>Vegetated surface (grass, shrubs, trees, etc.)</li>
                            </ul>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

        <!-- ########################################################################################### -->
    <!-- Step 3: Upload photos-->
    <!--          -->
    <!-- ########################################################################################### -->
    <section class="content shaded expeditions-data-step" data-toggle="collapse" data-target="#enterBaselineData3">
        <section class="container-fluid">
            <div id="step1-header" class="blue">
                <span class="fa-stack fa-3x">
                    <i class="fa fa-circle-o fa-stack-2x"></i>
                    <strong class="fa-stack-1x">3</strong>
                </span>

                <span>
                    <strong>Upload and tag any photos you took.</strong>
                    (Optional.) Click to open the photo uploader.
                </span>
            </div>
        </section>
    </section>

    <section class="content collapse" id="enterBaselineData3">
        <div class="form-group">
            <label for="date">Baseline Photos</label>
            <small class="form-text mb-3">
                Upload a photo of your structure, the substrate shells, the site
                and/or any other photos from your baseline that you'd like to share.
            </small>
            <div class="drop-area">
                Drag files here or click to upload photos.
            </div>
            <!--
            Photo types:
                - Expedition Photo
                - Oyster cage
                - Substrate shell (front)
                - Substrate shell (back)
            -->
        </div>
    </section>

    <section class="content">
        <div class="form-group mt-4">
            <div class="text-right">
                <button
                    type="submit"
                    class="btn btn-primary mr-2"
                >Submit Baselines
                </button>
            </div>
        </div>
    </section>
</form>
