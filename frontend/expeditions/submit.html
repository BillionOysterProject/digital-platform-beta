---
bindings:
-   name:     'mobileOrganisms'
    resource: '/api/mobile-organisms/'
    params:
        sort: commonName

---

<h1>Enter Data</h1>
<p>
    Click on the steps below to enter your information.  (Need help? Check out the wiki!)
</p>

<form class="form mt-4">
    <!-- ########################################################################################### -->
    <!-- Step 1: Enter Expedition Metadata-->
    <!--         Enter information (like date and location) about the expedition. -->
    <!-- ########################################################################################### -->
    <section class="content shaded expeditions-data-step" data-toggle="collapse" data-target="#enterdata1">
        <section class="container-fluid">
            <div id="step1-header" class="blue">
                <span class="fa-stack fa-3x">
                    <i class="fa fa-circle-o fa-stack-2x"></i>
                    <strong class="fa-stack-1x">1</strong>
                </span>

                <span>
                    <strong>Enter information about your expedition.</strong>
                </span>
            </div>
        </section>
    </section>

    <section class="content collapse" id="enterdata1">
        <div class="form-group">
            <label for="name">Expedition Name</label>
            <input class="form-control" type="text" name="name">
            <small class="form-text mb-3">
                Give your expedition a unique name.
            </small>
        </div>
        <div class="form-group">
            <label for="monitoringStartDate">Expedition Date and Time</label>
            <input
                class="form-control col-4"
                type="datetime-local"
                name="monitoringStartDate"
                value="{{ now `ymd` }}"
                autofocus
            >
        </div>


        <!--
            This next section is about selecting structures (like an ORS, Community Reef, or Oyster Tank).
            The goal is for users to be able to select from several different kinds of structures
            OR to choose "no structure" and report data about water quality or biodiversity that is tied
            to a site instead of a structure. If a user is entering data for a structure, the "Structure Name"
            list pops up.  If a user is not entering data for a structure, the "Sites" list should pop up instead.
            Selecting "no structure" will create an expedition with a dummy ORS with a structure type of "null."
            This is a limitation of the legacy platform. When we have fully moved to the new platform we can get
            rid of the dummy ORS.
        -->

        <div class="form-group mt-4">
            <label>
                Select your structure type
            </label>
            <p>
                (Note: if you're entering data that isn't associated with an oyster research structure, like
                    the results of a <a href="https://www.nationalgeographic.org/projects/bioblitz/" target="_blank">BioBlitz</a> or fish count, select "No structure.")
            </p>
            {{ range $i, $structureType := $.page.structureTypes }}
            <div class="custom-control custom-radio">
                <input
                    type="radio"
                    id="structure{{ $i }}"
                    class="custom-control-input"
                >
                <label class="custom-control-label w-100" for="structure{{ $i }}">
                    {{ $structureType.label }}
                </label>
            </div>
            {{ end }}
        </div>
<!--
        <div class="form-group">
            <label>Are you reporting data related to a structure, like an Oyster Research Station (ORS)?</label>
            <div class="custom-control custom-radio">
                <input
                    type="radio"
                    id="yesStructure"
                    name="hasStructure"
                    class="custom-control-input"
                    value="true"
                >
                <label
                    class="custom-control-label"
                    for="yesStructure"
                >
                    <strong>YES</strong>.   I'm following BOP's protocols to enter data for an ORS, Community Reef, Oyster Tank,
                    or other reef structure.
                </label>
            </div>
            <div class="custom-control custom-radio">
                <input
                    type="radio"
                    id="noStructure"
                    name="hasStructure"
                    class="custom-control-input"
                    value="false"
                >
                <label
                    class="custom-control-label"
                    for="noStructure"
                >
                    <strong>NO</strong>.    I'm entering data that isn't associated with a structure. (For example: reporting
                    the results of a <a href="https://www.nationalgeographic.org/projects/bioblitz/" target="_blank">BioBlitz</a> or fish count.)
                </label>
            </div>
        </div>
-->
<!-- "Structure Name" field displays if user answers "YES" to "Are you reporting data related to a structure, like an Oyster Research Station (ORS)?"-->
        <div class="form-group">
            <label for="station">Structure Name</label>
            <div class="input-group">
                <input
                    type="text"
                    class="form-control typeahead w-100"
                    name="station"
                    data-typeahead-url="/api/restoration-stations?fields=name&amp;q=str:name/contains:{}&amp;sort=name"
                    data-typeahead-field="name"
                >

                <small class="form-text mb-3">
                    Start typing your structure's name in the field above, then select it from the dropdown list.  Don't see your structure? You can add one on our <a class="font-weight-bold" href="#">Register a Structure</a> page.
                </small>
            </div>
        </div>

<!-- "Site Name" field displays if user answers "NO" to "Are you reporting data related to a structure, like an Oyster Research Station (ORS)?"-->
        <div class="form-group">
            <label for="site">Site Name</label>
            <div class="input-group">
                <input
                    type="text"
                    class="form-control typeahead w-100"
                    name="site"
                    data-typeahead-url="/api/sites?fields=name&amp;q=str:name/contains:{}&amp;sort=name"
                    data-typeahead-field="name"
                >
                <small class="form-text mb-3">
                    Start typing your site's name in the field above, then select it from the dropdown list.
                </small>
            </div>
        </div>

        <div class="form-group">
            <label for="team">Team</label>
            <p>
                If you'd like other members of your team to be able to edit this expedition, select your team below.
                Otherwise, you can leave this blank.
            </p>
            <p>
                (Note: team members [students] will only be allowed to edit protocols you add them to in the next section.)
            </p>
            <div class="input-group">
                <input
                    type="text"
                    class="form-control typeahead w-100"
                    name="team"
                    data-typeahead-url="/api/teams?fields=name&amp;q=str:name/contains:{}&amp;sort=name"
                    data-typeahead-field="name"
                >
                <small class="form-text mb-3">
                    Start typing your team's name in the field above, then select it from the dropdown list.
                </small>
            </div>
        </div>

        <!--If user selected "Community Reef" or "Other Reef" above, display fields "Number of
            adults," "Number of students," and other fields from the field report -->

        <div class="form-group">
            <label for="name">Number of adults</label>
            <input class="form-control col-2" type="number" min="0" name="numberAdults">
        </div>
        <div class="form-group">
            <label for="name">Number of students</label>
            <input class="form-control col-2" type="number" min="0" name="numberStudents">
        </div>
    </section>

    <!-- ########################################################################################### -->
    <!-- Step 2: Enter protocol data-->
    <!--          -->
    <!-- ########################################################################################### -->
    <section class="content shaded expeditions-data-step" data-toggle="collapse" data-target="#enterdata2">
        <section class="container-fluid">
            <div id="step1-header" class="blue">
                <span class="fa-stack fa-3x">
                    <i class="fa fa-circle-o fa-stack-2x"></i>
                    <strong class="fa-stack-1x">2</strong>
                </span>

                <span>
                    <strong>Enter the data you collected.</strong>
                </span>
            </div>
        </section>
    </section>

    <section class="content collapse" id="enterdata2">
        <p>
            Click on a section below to enter data.  All fields are optional, but try to submit
            as much data as you can!
        </p>

                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" value="" id="test1">
                            <label class="form-check-label" for="test1">
                                Allow all team members to edit all protocols.
                            </label>
                        </div>

        <div id="accordion">

            <!-- BEGIN Oyster Measurements -->
            <div class="card border-0">
                <div class="card-header" id="addOysterMeasurements">
                    <section class="shaded" data-toggle="collapse" data-target="#oysterMeasurement">
                        <section class="container-fluid">
                            <div id="step1-header" class="blue">
                                <i class="fa fa-plus fa-2x"></i>
                                <strong>Oyster Measurements</strong>
                            </div>
                        </section>
                    </section>
                </div>

                <div id="oysterMeasurement" class="collapse" aria-labelledby="addOysterMeasurements" data-parent="#accordion">
                    <div class="card-body">
                        <p class="form-text mb-3">
                            <div class="container-fluid" style="border-radius: 2em; background-color: #EEEEEE; margin-bottom: 2em; padding: 1.5em;">
                                <div class="row">
                                    <div class="col-sm-12 col-md-6 form-group">
                                        <label>Invite team members to enter data for this protocol:</label>
                                        <input type="text" class="form-control">
                                        <br />
                                        <button tyle="button" class="btn btn-primary">
                                            <i class="fa fa-envelope"></i>
                                            Send Invite
                                        </button>
                                    </div>

                                    <div class="col-sm-12 col-md-6 form-group">
                                        <label>Team members who can edit this protocol:</label>

                                        <ul class="list-group">
                                            <li class="list-group-item">
                                                Johnny Userface
                                                <a class="pull-right"><i class="fa fa-fw fa-times"></i></a>
                                            </li>
                                            <li class="list-group-item">
                                                <i>Sally Shrimphead (has not accepted)</i>
                                                <a class="pull-right"><i class="fa fa-fw fa-times"></i></a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <p><strong>Oyster Measurements</strong></p>
                            Enter the measurements of each live oyster on each substrate shell in the table below.
                            <ul>
                                <li>In the first column, enter the substrate shell number (#1-10).</li>
                                <li>In the second column, enter the length (in millimeters) of
                                each <strong>live</strong> oyster on that substrate shell.</li>
                            </ul>
                            You can also copy and paste your data from a spreadsheet- <a href="https://docs.google.com/spreadsheets/d/1VwK2Slu4h7L3ZWU3LRwFWt7NvNb2HmWK3M3c8S0P-BI/edit?usp=sharing" target="_blank">click to view an example</a>.
                            (Rows will automatically be added to the end of the table as you type.)
                        </p>

                        <div class="w-100" style="overflow: hidden;">
                            <div id="oysterMeasurementsTable"></div>
                        </div>

                        <div class="alert alert-info form-text mt-4" role="alert">
                            <small>
                            Note: If you see a red background in a cell, check your numbers!  The substrate shell column accepts values from 1-10,
                            and the oyster length column accepts values from 1-250.
                            </small>
                        </div>

                        <div class="form-group mt-4">
                            <label for="protocols.oysterMeasurement.conditionOfOysterCage.bioaccumulationOnCage">
                                Bioaccumulation on Cage
                            </label>

                            <div class="custom-control custom-radio">
                                <input
                                    type="radio"
                                    name="protocols.oysterMeasurement.conditionOfOysterCage.bioaccumulationOnCage"
                                    id="ba1"
                                    class="custom-control-input"
                                >
                                <label class="custom-control-label w-100" for="ba1">
                                    <span>None/clean</span> No macroalgae or animals present
                                </label>
                            </div>

                            <div class="custom-control custom-radio">
                                <input
                                    type="radio"
                                    name="protocols.oysterMeasurement.conditionOfOysterCage.bioaccumulationOnCage"
                                    class="custom-control-input"
                                    id="ba2"
                                >
                                <label class="custom-control-label w-100" for="ba2">
                                    <span>Light</span> Macroalgae or minimal animals present that do not encroach on mesh openings
                                </label>
                            </div>
                            <div class="custom-control custom-radio">
                                <input
                                    type="radio"
                                    name="protocols.oysterMeasurement.conditionOfOysterCage.bioaccumulationOnCage"
                                    class="custom-control-input"
                                    id="ba3"
                                >
                                <label class="custom-control-label w-100" for="ba3">
                                    <span>Medium</span> Some encrusting macroalgae/animals reducing size of mesh opening up to 25%
                                </label>
                            </div>
                            <div class="custom-control custom-radio">
                                <input
                                    type="radio"
                                    name="protocols.oysterMeasurement.conditionOfOysterCage.bioaccumulationOnCage"
                                    class="custom-control-input"
                                    id="ba4"
                                >
                                <label class="custom-control-label w-100" for="ba4">
                                    <span>Heavy</span> Encrusting macroalgae/animals reducing mesh opening by over 50%
                                </label>
                            </div>
                        </div>

                        <div class="form-group mt-4">
                            <label for="notes">Oyster Measurement Notes</label>
                            <textarea
                                class="form-control"
                                type="text"
                                name="notes"
                                maxlength="16536"
                            ></textarea>
                        </div>

                    </div>
                </div>
            </div>
            <!-- END Oyster Measurements -->

            <!-- BEGIN Site Conditions -->
            <div class="card border-0">
                <div class="card-header" id="addSiteConditions">
                    <section class="shaded" data-toggle="collapse" data-target="#siteConditions">
                        <section class="container-fluid">
                            <div id="step2-header" class="blue">
                                <i class="fa fa-plus fa-2x"></i>
                                <strong>Site Conditions</strong>
                            </div>
                        </section>
                    </section>
                </div>
                <div id="siteConditions" class="collapse" aria-labelledby="addSiteConditions" data-parent="#accordion">
                    <div class="card-body">
                        <p>-->Assign to another user.</p>
                        <h3>Meteorological Conditions
                        </h3>

                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="weatherConditions">Weather Conditions</label>
                                    <br/>
                                    <div class="btn-group btn-group-toggle">
                                        {{ range $i, $weatherCondition := $.page.weatherConditions }}
                                        <label
                                            class="btn btn-primary"
                                        >
                                            <input
                                                type="radio"
                                                name="weatherConditions"
                                            >
                                            {{ $weatherCondition.label }}
                                        </label>
                                        {{ end }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="temperature">Air temperature (C)</label>
                                    <input
                                        class="form-control"
                                        name="temperature"
                                        type="number"
                                        step="0.1"
                                        min="-40"
                                        max="50"

                                    />
                                    <span class="help-block">
                                        <p>Fahrenheit: &deg;F</p>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="windSpeed">Wind speed (mph)</label>
                                    <input
                                        class="form-control"
                                        type="number"
                                        min="0"
                                        name="windSpeed"
                                    />
                                    <span class="help-block">Method: Anemometer</span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="windDirection">Wind Direction</label>
                                    <br/>
                                    <div class="btn-group btn-group-toggle">
                                        {{ range $i, $windDirection := $.page.windDirections }}
                                        <label
                                            class="btn btn-primary"
                                        >
                                            <input
                                                type="radio"
                                                name="windDirection"
                                            >
                                            {{ $windDirection.label }}
                                        </label>
                                        {{ end }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="humidity">Humidity (%)</label>
                                    <input
                                        class="form-control"
                                        type="number"
                                        min="0"
                                        name="humidity"
                                    />
                                    <span class="help-block">Method: Sling Psychrometer</span>
                                </div>
                            </div>
                        </div>

                        <hr/>
                        <h3>Recent Rainfall
                        </h3>
                        <div class="form-group">
                            <label>Has it rained in the past <span class="blue">7</span> days?</label>
                            <br/>
                            <div class ="btn-group btn-group-toggle">
                                <label
                                    class="btn btn-primary"
                                >
                                    <input
                                        type="radio"
                                        name="recentRainfall.rainedIn7Days"
                                    >
                                    Yes
                                </label>
                                <label
                                    class="btn btn-primary"
                                >
                                    <input
                                        type="radio"
                                        name="recentRainfall.rainedIn7Days"
                                    >
                                    No
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Has it rained in the past <span class="blue">72</span> hours?</label>
                            <br/>
                            <div class ="btn-group btn-group-toggle">
                                <label
                                    class="btn btn-primary"
                                >
                                    <input
                                        type="radio"
                                        name="recentRainfall.rainedIn72Hours"
                                    >
                                    Yes
                                </label>
                                <label
                                    class="btn btn-primary"
                                >
                                    <input
                                        type="radio"
                                        name="recentRainfall.rainedIn72Hours"
                                    >
                                    No
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Has it rained in the past <span class="blue">24</span> hours?</label>
                            <br/>
                            <div class ="btn-group btn-group-toggle">
                                <label
                                    class="btn btn-primary"
                                >
                                    <input
                                        type="radio"
                                        name="recentRainfall.rainedIn24Hours"
                                    >
                                    Yes
                                </label>
                                <label
                                    class="btn btn-primary"
                                >
                                    <input
                                        type="radio"
                                        name="recentRainfall.rainedIn24Hours"
                                    >
                                    No
                                </label>
                            </div>
                        </div>

                        <hr/>
                        <h3>Water Conditions</h3>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="surfaceCurrentSpeedMPS">
                                        Surface current speed (meters/second)
                                    </label>
                                    <input
                                        class="form-control"
                                        type="number"
                                        min="0"
                                        name="surfaceCurrentSpeedMPS"
                                    />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="waterColor">Describe the water color</label>
                                    <br/>
                                    <div class="btn-group btn-group-toggle">
                                        {{ range $i, $waterColor := $.page.waterColors }}
                                        <label
                                            class="btn btn-primary"
                                        >
                                            <input
                                                type="radio"
                                                name="waterColor"
                                            >
                                            {{ $waterColor.label }}
                                        </label>
                                        {{ end }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Is there an oil sheen present?</label>
                                    <br/>
                                    <div class="btn-group btn-group-toggle">
                                        <label
                                            class="btn btn-primary"
                                        >
                                            <input
                                                type="radio"
                                                name="waterConditions.oilSheen"
                                            >
                                            Yes
                                        </label>
                                        <label
                                            class="btn btn-primary"
                                        >
                                            <input
                                                type="radio"
                                                name="waterConditions.oilSheen"
                                            >
                                            No
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Is there any garbage in the water?</label>
                                    <br/>
                                    <div class="btn-group btn-group-toggle">
                                        <label
                                            class="btn btn-primary"
                                        >
                                            <input
                                                type="radio"
                                                name="garbage.garbagePresent"
                                            >
                                            Yes
                                        </label>
                                        <label
                                            class="btn btn-primary"
                                        >
                                            <input
                                                type="radio"
                                                name="garbage.garbagePresent"
                                            >
                                            No
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <p>placeholder for water garbage</p>

                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="CSOPipeFlow">
                                        Is there any flow through the Combined Sewer Overflow (CSO) pipes?
                                    </label>
                                    <br/>
                                    <div class="btn-group btn-group-toggle">
                                        {{ range $i, $pipeFlow := $.page.pipeFlows }}
                                        <label
                                            class="btn btn-primary"
                                        >
                                            <input
                                                type="radio"
                                                name="CSOPipeFlow"
                                            >
                                            {{ $pipeFlow.label }}
                                        </label>
                                        {{ end }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="otherPipeFlow">
                                        Is there any flow through the unmarked or other outfall pipes?
                                    </label>
                                    <br/>
                                    <div class="btn-group btn-group-toggle">
                                        {{ range $i, $pipeFlow := $.page.pipeFlows }}
                                        <label
                                            class="btn btn-primary"
                                        >
                                            <input
                                                type="radio"
                                                name="otherPipeFlow"
                                            >
                                            {{ $pipeFlow.label }}
                                        </label>
                                        {{ end }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr/>
                        <h3>Land Conditions</h3>
                        <p>placeholder for land garbage</p>

                        <div class="form-group mt-4">
                            <label for="notes">Site Conditions Notes</label>
                            <textarea
                                class="form-control"
                                type="text"
                                name="notes"
                                maxlength="16536"
                            ></textarea>
                        </div>


                    </div>
                </div>
            </div>
            <!-- END Site Conditions -->

            <!-- BEGIN Mobile Organisms -->
            <div class="card border-0">
                <div class="card-header" id="addMobileOrganisms">
                    <section class="shaded" data-toggle="collapse" data-target="#mobileOrganisms">
                        <section class="container-fluid">
                            <div id="step2-header" class="blue">
                                <i class="fa fa-plus fa-2x"></i>
                                <strong>Mobile Organisms</strong>
                            </div>
                        </section>
                    </section>
                </div>
                <div id="mobileOrganisms" class="collapse" aria-labelledby="addMobileOrganisms" data-parent="#accordion">
                    <div class="card-body">
                        <p>-->Assign to another user.</p>
                        <p><strong>Mobile Organism Identifications</strong></p>
                        <p>Count how many of each type of mobile organism you found, then enter the number in the table below.
                        </p>
                        <p>
                            You can also copy and paste your data from a spreadsheet- <a href="https://docs.google.com/spreadsheets/d/1VwK2Slu4h7L3ZWU3LRwFWt7NvNb2HmWK3M3c8S0P-BI/edit?usp=sharing" target="_blank">click to view an example</a>.
                        </p>
                        <div class="w-100" style="overflow: hidden;">
                            <div id="mobileOrganismsTable"></div>
                        </div>
                        <div class="form-group mt-4">
                            <label for="notes">Mobile Organisms Notes</label>
                            <textarea
                                class="form-control"
                                type="text"
                                name="notes"
                                maxlength="16536"
                            ></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END Mobile Organisms -->

            <!-- BEGIN Sessile Organisms -->
            <div class="card border-0">
                <div class="card-header" id="addSessileOrganisms">
                    <section class="shaded" data-toggle="collapse" data-target="#sessileOrganisms">
                        <section class="container-fluid">
                            <div id="step2-header" class="blue">
                                <i class="fa fa-plus fa-2x"></i>
                                <strong>Sessile Organisms</strong>
                            </div>
                        </section>
                    </section>
                </div>
                <div id="sessileOrganisms" class="collapse" aria-labelledby="addSessileOrganisms" data-parent="#accordion">
                    <div class="card-body">
                        <p>-->Assign to another user.</p>
                        <p><strong>Sessile Organism Identifications</strong></p>
                        <p>In the table below, select the sessile organism you found in the middle of each cross hatch.
                            (See this diagram for help!)
                        </p>
                        <div class="w-100" style="overflow: hidden;">
                            <div id="sessileOrganismsTable"></div>
                        </div>
                        <div class="form-group mt-4">
                            <label for="notes">Sessile Organisms Notes</label>
                            <textarea
                                class="form-control"
                                type="text"
                                name="notes"
                                maxlength="16536"
                            ></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END Sessile Organisms -->

            <!-- BEGIN Water Quality -->
            <div class="card border-0">
                <div class="card-header" id="addWaterQuality">
                    <section class="shaded" data-toggle="collapse" data-target="#waterQuality">
                        <section class="container-fluid">
                            <div id="step2-header" class="blue">
                                <i class="fa fa-plus fa-2x"></i>
                                <strong>Water Quality</strong>
                            </div>
                        </section>
                    </section>
                </div>
                <div id="waterQuality" class="collapse" aria-labelledby="addWaterQuality" data-parent="#accordion">
                    <div class="card-body">
                        <p>-->Assign to another user.</p>
                        <p><strong>Water Quality Parameter Measurements</strong></p>
                        <p>For every water quality parameter you'd like to submit, select the method and then enter
                            the three measurements in the table below.
                        </p>
                        <p>
                            You can also copy and paste your data from a spreadsheet- <a href="https://docs.google.com/spreadsheets/d/1VwK2Slu4h7L3ZWU3LRwFWt7NvNb2HmWK3M3c8S0P-BI/edit?usp=sharing" target="_blank">click to view an example</a>.
                        </p>
                        <div style="overflow: hidden;" class="w-100"></div>
                            <div id="waterQualityTable"></div>
                        </div>
                        <div class="form-group mt-4">
                            <label for="notes">Water Quality Notes</label>
                            <textarea
                                class="form-control"
                                type="text"
                                name="notes"
                                maxlength="16536"
                            ></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END Water Quality -->

            <!-- BEGIN Report a Wild Oyster -->
            <div class="card border-0">
                <div class="card-header" id="addWildOysters">
                    <section class="shaded" data-toggle="collapse" data-target="#wildOysters">
                        <section class="container-fluid">
                            <div id="step2-header" class="blue">
                                <i class="fa fa-bullhorn fa-2x"></i>
                                <strong>Report a wild oyster sighting</strong>
                            </div>
                        </section>
                    </section>
                </div>
                <div id="wildOysters" class="collapse" aria-labelledby="addWildOysters" data-parent="#accordion">
                    <div class="card-body">
                        <p>-->Assign to another user.</p>
                        <p>Did you find any wild oysters?
                        </p>
                        <div class="form-group mt-4">
                            <label for="notes">Wild Oyster Notes</label>
                            <textarea
                                class="form-control"
                                type="text"
                                name="notes"
                                maxlength="16536"
                            ></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END Report a Wild Oyster -->
        </div>
    </section>

    <!-- ########################################################################################### -->
    <!-- Step 3: Upload photos-->
    <!--          -->
    <!-- ########################################################################################### -->
    <section class="content shaded expeditions-data-step" data-toggle="collapse" data-target="#enterdata3">
        <section class="container-fluid">
            <div id="step1-header" class="blue">
                <span class="fa-stack fa-3x">
                    <i class="fa fa-circle-o fa-stack-2x"></i>
                    <strong class="fa-stack-1x">3</strong>
                </span>

                <span>
                    <strong>Upload and tag any photos you took.</strong>
                </span>
            </div>
        </section>
    </section>

    <section class="content collapse" id="enterdata3">
        <div class="form-group">
            <label for="date">Expedition Photos</label>
            <small class="form-text mb-3">
                Upload a photo of your ORS, inner and outer oyster substrate shell photos, and/or any other photos
                from your expedition that you'd like to share.
            </small>
            <div class="drop-area">
                Drag files here or click to upload photos from this expedition.
            </div>
            <!--
            Photo types:
                - Expedition Photo
                - Oyster cage
                - Substrate shell (front)
                - Substrate shell (back)
            -->
        </div>
    </section>

    <section class="content">
        <div class="form-group mt-4">
            <div class="text-right">
                <button
                    type="submit"
                    class="btn btn-primary mr-2"
                >Save Expedition</button>

                <button
                    type="submit"
                    class="btn btn-success ml-2"
                >Save &amp; Publish Expedition</button>
            </div>
        </div>
    </section>
</form>

<script type="text/javascript">
    $(function(){
        var dataObject = [];

        var validatePositive = function(checkvalue) {
            return function(value, callback){
                try {
                    if ($.isNumeric(value) && checkvalue(value)) {
                        callback(true);
                        return;
                    }
                } catch(e) {
                    ;
                }

                callback(false);
            }
        }

        Handsontable.validators.registerValidator('valid-settlement-tile', validatePositive(function(v){
            return (v > 0) && (v <= 10) && Math.floor(v) == v;
        }));

        Handsontable.validators.registerValidator('valid-oyster', validatePositive(function(v) {
            return (v > 0) && (v < 250);
        }));

        Handsontable.validators.registerValidator('valid-species-count', validatePositive(function(v) {
            return (v >= 0);
        }));


        var oysterMeasurementsTable = new Handsontable(document.querySelector('#oysterMeasurementsTable'), {
            stretchH:          'all',
            autoWrapRow:       true,
            minSpareRows:       5,
            startRows:          5,
            maxRows:            100,
            manualRowResize:    true,
            manualColumnResize: true,
            contextMenu:        true,
            rowHeaders:         true,
            preventOverflow:    'horizontal',
            columns: [{
                data:      'substrateShellNumber',
                type:      'numeric',
                validator: 'valid-settlement-tile',
                width:     30,
            }, {
                data:      'oysterLength',
                type:      'numeric',
                validator: 'valid-oyster',
                width:     30,
                numericFormat: {
                    pattern: '0.00',
                    culture: 'en-US',
                },
            }],
            colHeaders: [
                'Substrate Shell No.',
                'Oyster Length (mm)',
            ],
        });

        var mobileOrganismsTable = new Handsontable(document.querySelector('#mobileOrganismsTable'), {
            stretchH:          'all',
            autoWrapRow:       true,
            minSpareRows:       5,
            startRows:          5,
            maxRows:            100,
            manualRowResize:    true,
            manualColumnResize: true,
            contextMenu:        true,
            rowHeaders:         true,
            preventOverflow:    'horizontal',
            renderAllRows:      true,
            columns: [{
                data:      'commonName',
                editor:    false,
                width:     20,
            }, {
                data:      'latinName',
                editor:    false,
                width:     20,
            }, {
                data:      'countOfSpecies',
                type:      'numeric',
                validator: 'valid-species-count',
                width:      20,
                numericFormat: {
                    pattern: '0',
                    culture: 'en-US',
                },
            }, {
                data:       'notes',
                width:       20,
            }],
            colHeaders: [
                'Common Name',
                'Scientific Name',
                '# of Organisms',
                'Notes',
            ],
            data: JSON.parse({{ jsonify $.bindings.mobileOrganisms }}),
        });

        var sessileOrganismsTable = new Handsontable(document.querySelector('#sessileOrganismsTable'), {
            stretchH:           'all',
            autoWrapRow:        true,
            minSpareRows:       1,
            startRows:          25,
            maxRows:            100,
            manualRowResize:    true,
            manualColumnResize: true,
            contextMenu:        true,
            rowHeaders:         true,
            preventOverflow:    'horizontal',
            renderAllRows:      true,
            columns: [{
                data:      'commonName',
                editor:    false,
                width:     20,
                type:      'dropdown',
            }, {
                data:       'notes',
                width:       20,
            }],
            colHeaders: [
                'Common Name',
                'Notes',
            ],
        });

        var waterQualityTable = new Handsontable(document.querySelector('#waterQualityTable'), {
            stretchH:          'all',
            autoWrapRow:       true,
            minSpareRows:       1,
            startRows:          5,
            maxRows:            100,
            manualRowResize:    true,
            manualColumnResize: true,
            contextMenu:        true,
            rowHeaders:         true,
            preventOverflow:    'horizontal',
            renderAllRows:      true,
            columns: [{
                data:      'waterQualityParameter',
                editor:    false,
            }, {
                data:      'method',
                editor:    false,
                type: 'dropdown',
            }, {
                data:      'unit',
            }, {
                data:       'result1',
                type:      'numeric',
            }, {
                data:       'result2',
                type:      'numeric',
            }, {
                data:       'result3',
                type:      'numeric',
            }],
            colHeaders: [
                'Water Quality Parameter',
                'Method',
                'Unit',
                'Result #1',
                'Result #2',
                'Result #3',
            ],
        });
    })
</script>
